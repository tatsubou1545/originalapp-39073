# README

## アプリケーション名
Patte à Patte (パット ア パット)

## アプリケーション概要
犬の飼い主同士が情報共有やコミュニティを作成することが出来ます。

## URL
https://originalapp-39073.onrender.com

## テスト用アカウント
Basic認証  
  ID：admin  
  PASS：04231921  


ログインアカウント  
  ID：test@test.jp  
  pass：123abc

  ID：test2@test.jp  
  pass：123abc


## 利用方法
### ログイン
1.ヘッダーにあるログインを押下する  
2.ユーザーIDとパスワードを入力し、ログインボタンを押下する  
3.ユーザーを作成していない場合は、ヘッダーの新規登録を押下する  
4.必須項目を入力し、登録ボタンを押下する

### ログアウト
1.ヘッダーにあるユーザー名を押下する  
2.ログインアウトを押下する

### 情報投稿
1.トップページにて、投稿するボタンを押下する  
2.必須項目の入力とアップロードする画像を選択し、投稿するボタンを押下する

### いいねボタン
1.トップページにて、投稿内容下部の"いいね"ボタンを押下する  
2."いいね"ボタンを押下すると、ハートマークに色が付く  
3.再度、"いいね"ボタンを押下すると"いいね"を解除する  

### 投稿内容詳細確認
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.投稿内容の詳細を確認することが可能になる

### 画像ダウンロード
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.投稿内容の下部にあるダウンロードボタンを押下する

### 投稿内容編集
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.投稿内容の下部にある編集ボタンを押下する  
3.投稿内容を編集し、投稿ボタンを押下する

### 投稿内容削除
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.投稿内容の下部にある削除ボタンを押下する

### コメント投稿
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.コメント入力欄にコメントを入力する  
3."コメントする"ボタンを押下する  

### コメント編集
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.コメント欄にある編集ボタンを押下する  
3.編集内容を入力する  
4."更新する"ボタンを押下する  

### コメント削除
1.トップページに表示されている投稿内にある詳細ボタンを押下する  
2.コメント欄にある削除ボタンを押下する  

### チャットルーム作成
1.トップページに表示されているルーム作成ボタンを押下する  
2.ルーム名の入力欄が表示されるので、ルーム名を入力し、作成するボタンを押下する

### チャットルーム内でのメッセージ投稿
1.トップページのヘッダーにあるRoomをクリックする  
2.ルーム一覧画面の左側に所属しているルームが一覧で表示される  
3.ルームを選択し、メッセージ入力欄にメッセージを入力し、送信ボタンを押下する  
4.画像を送信する場合は、メッセージ入力欄右にある写真マークをクリックし、画像を選択後、送信ボタンを押下する

### チャットルームへのユーザー追加
1.トップページのヘッダーにあるRoomをクリックする  
2.ルーム一覧画面にてルームを選択する  
3.メッセージ入力欄左の三角ボタンをクリックし、ユーザー追加を選択する  
4.追加したいユーザーをプルダウンリスト内から選択し、追加ボタンを押下する

### チャットルームの削除
1.トップページのヘッダーにあるRoomをクリックする  
2.ルーム一覧画面にてルームを選択する  
3.メッセージ入力欄左の三角ボタンをクリックし、ルーム削除を選択する

### マイページ表示
1.トップページのヘッダーにあるユーザー名をクリックする  
2.マイページを選択する

### マイページにてアカウント情報編集
1.トップページのヘッダーにあるユーザー名をクリックする  
2.マイページを選択する  
3.画面左側にユーザー情報が表示される  
4.アカウント情報編集をクリックする  
5.内容を編集し更新ボタンを押下する

### マイページにて飼犬情報登録
1.トップページのヘッダーにあるユーザー名をクリックする  
2.マイページを選択する  
3.画面左側にユーザー情報が表示される  
4.飼犬情報登録をクリックする  
5.必須項目を入力し登録ボタンを押下する

### マイページにて飼犬情報登録
1.トップページのヘッダーにあるユーザー名をクリックする  
2.マイページを選択する  
3.画面右側に登録されている飼犬情報が表示される  
4.編集をクリックする  
5.内容を編集し登録ボタンを押下する

### マイページにて飼犬情報削除
1.トップページのヘッダーにあるユーザー名をクリックする  
2.マイページを選択する  
3.画面右側に登録されている飼犬情報が表示される  
4.削除をクリックする

## アプリケーションを作成した背景
初めて犬を飼うことになり、しつけ方法やドッグフード、動物病院や犬種にあった育て方など何が良くて何がダメなのか
分からず苦労しました。初めて犬を飼う人たちが、育て方や日々の生活の中で気を付けることを共有出来たり、経験者の
方々からのアドバイスを手軽に貰えるような環境があれば良かったと思うことがあったため、本アプリの開発を決めました。

## 洗い出した要件
[要件を定義したシート](https://docs.google.com/spreadsheets/d/1Qo2gGtkPcVQnAIfGzUylmzpu9tJm6oa4jcbs6uJlLDc/edit#gid=982722306)

## 実装した機能についての画像やGIFおよびその説明
・情報投稿、編集、削除、画像ダウンロード機能  
・コメント投稿、編集、削除機能
・チャットルーム作成機能  
・チャットルーム内でのメッセージ投稿機能  
・マイページでのユーザー情報編集機能、飼犬情報登録、編集、削除機能

## 実装予定の機能
現在、投稿内容に対してのいいね機能を実装中です。  
今後は、カレンダー機能によるワクチン接種等の予定をリマインド出来るような機能を実装予定です。

## データベース設計
[![Image from Gyazo](https://i.gyazo.com/b56ceb3db5c819f24d58c49160f1cacd.png)](https://gyazo.com/b56ceb3db5c819f24d58c49160f1cacd)

## 画面遷移図
[![Image from Gyazo](https://i.gyazo.com/fcdb0530d830b42ce6867a98b04e1b0a.png)](https://gyazo.com/fcdb0530d830b42ce6867a98b04e1b0a)

## 開発環境
・フロントエンド  
・バックエンド  
・インフラ  
・テスト  
・VSCode  
・タスク管理

## ローカルでの動作方法
以下のコマンドを順に実行  
% git clone https://github.com/tatsubou1545/originalapp-39073.git  
% cd originalapp-39073  
% bundle install  
% yarn install

## 工夫したポイント
画面のレイアウトが見やすく、ユーザーが使いやすい様にと考えながら作成しました。  
具体的には、色のグラデーションを避け、黒と白をベースとして見やすいようなレイアウトにしました。  
また、コントローラー内でプライベートメソッドを作成し、出来るだけ同じ処理を記述しないようにオブジェクト指向を意識しながらコードを作成しました。  




## users テーブル

| Column             | Type   | Options     |
| ------------------ | ------ | ----------- |
| nickname           | string | null: false |
| email              | string | null: false |
| encrypted_password | string | null: false |
| user_profile       | text   |             |

### Association

- has_many :posts
- has_many :messages
- has_many :room_users
- has_many :rooms, through: :room_users
- has_one_attached :image
- has_many :dog_profiles
- has_many :comments
- has_many :likes

## dog_profiles テーブル

| Column             | Type       | Options                       |
| ------------------ | ---------- | ----------------------------- |
| dog_breed          | string     | null: false                   |
| dog_birthday       | date       |                               |
| dog_profile        | text       |                               |
| user               | references | null: false, foreign_key: true|

### Association
- belongs_to :user
- has_one_attached :image


## posts テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| tilte              | string     | null: false                   |
| content            | text       | null: false                   |
| category_id        | integer    | null: false                   |
| user               | references | null: false, foreign_key: true|

### Association
- belongs_to :user
- has_one_attached :image
- has_many :comments
- has_many :likes


## rooms テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| name               | string     | null: false                   |

### Association
- has_many :room_users, dependent: :destroy
- has_many :users, through: :room_users
- has_many :messages, dependent: :destroy


## room_users テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| room               | references | null: false, foreign_key: true|
| user               | references | null: false, foreign_key: true|

### Association
- belongs_to :room
- belongs_to :user


## messages テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| content            | string     |                               |
| room               | references | null: false, foreign_key: true|
| user               | references | null: false, foreign_key: true|

### Association
- belongs_to :room
- belongs_to :user
- has_one_attached :image


## comments テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| text               | text       |                               |
| post               | references | null: false, foreign_key: true|
| user               | references | null: false, foreign_key: true|

### Association
- belongs_to :post
- belongs_to :user


## likes テーブル

| Column             | Type       | Options                       |
| ------------------ | -----------| ----------------------------- |
| post               | references | foreign_key: true             |
| user               | references | foreign_key: true             |

### Association
- belongs_to :post
- belongs_to :user